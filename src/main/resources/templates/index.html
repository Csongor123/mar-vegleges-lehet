<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>SportesemÃ©ny NyilvÃ¡ntartÃ³</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<nav class="navbar">
    <a href="/" class="logo-link">
        SN
    </a>

    <a href="/favorites" class="nav-link">
        <i class="nav-icon">â­</i> KEDVENCEK
        <span class="favorite-count-badge" th:text="${favoriteCount}"></span>
    </a>


    <a href="/football" class="nav-link"><i class="nav-icon">âš½</i> LABDARÃšGÃS</a>
    <a href="/basketball" class="nav-link"><i class="nav-icon">ğŸ€</i> KOSÃRLABDA</a>
    <a href="/running" class="nav-link"><i class="nav-icon">ğŸƒ</i> FUTÃS</a>
    <a href="/tennis" class="nav-link"><i class="nav-icon">ğŸ¾</i> TENISZ</a>
    <a href="/swimming" class="nav-link"><i class="nav-icon">ğŸŠ</i> ÃšSZÃS</a>
    <a href="/volleyball" class="nav-link"><i class="nav-icon">ğŸ</i> RÃ–PLABDA</a>
    <a href="/handball" class="nav-link"><i class="nav-icon">ğŸ¤¾</i> KÃ‰ZILABDA</a>
    <a href="/icehockey" class="nav-link"><i class="nav-icon">ğŸ’</i> JÃ‰GKORONG</a>
    <a href="/cycling" class="nav-link"><i class="nav-icon">ğŸš´</i> KERÃ‰KPÃROZÃS</a>
    <a href="/fencing" class="nav-link"><i class="nav-icon">ğŸ¤º</i> VÃVÃS</a>
    <a href="/tabletennis" class="nav-link"><i class="nav-icon">ğŸ“</i> ASZTALITENISZ</a>
</nav>

<div class="main-content">
    <div class="sidebar">
        <div class="sidebar-header"><i>ğŸ“Š</i> ESEMÃ‰NYEK</div>
        <div class="category-item" onclick="window.location.href='/'"><i>ğŸ“…</i> Ã–sszes esemÃ©ny</div>
        <div class="category-item" onclick="window.location.href='/upcoming-events'"><i>ğŸ—“ï¸</i> KÃ¶zelgÅ‘ esemÃ©nyek</div>
        <div class="category-item" onclick="window.location.href='/completed-events'"><i>âœ…</i> TeljesÃ­tett esemÃ©nyek</div>
        <div class="category-item" onclick="window.location.href='/add'"><i>â•</i> Ãšj rÃ©sztvevÅ‘</div>
    </div>

    <div class="content">
        <div th:if="${success}" id="successMessage" class="success-message">
            <p th:text="${success}"></p>
        </div>

        <h2 th:text="${title}">SportesemÃ©nyek</h2>
        <table>
            <thead>
            <tr>
                <th>SportÃ¡g</th>
                <th>NÃ©v</th>
                <th>HelyszÃ­n</th>
                <th>DÃ¡tum</th>
                <th>RÃ©sztvevÅ‘k</th>
                <th>Kedvenc</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="event : ${events}">
                <td th:text="${event.category}"></td>
                <td th:text="${event.name}"></td>
                <td th:text="${event.location}"></td>
                <td th:text="${event.date}"></td>
                <td>
                    <ul>
                        <li th:each="participant : ${event.participants}">
                            <span th:text="${participant.name}"></span>
                            <form th:if="${participant.email == 'current@example.com'}"
                                  th:action="@{'/delete-participant/' + ${participant.id}}"
                                  method="post" style="display:inline">
                                <button type="submit">ğŸ—‘ï¸</button>
                            </form>
                        </li>
                    </ul>
                </td>
                <td>
                    <form th:action="@{'/toggle-favorite/' + ${event.id}}" method="post" th:if="${!event.favorite}">
                        <button type="submit">â­</button>
                    </form>
                    <form th:action="@{'/unfollow-favorite/' + ${event.id}}" method="post" th:if="${event.favorite}">
                        <button type="submit">ğŸ—‘ï¸</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    const successMessage = document.getElementById('successMessage');
    if (successMessage) {
        setTimeout(() => {
            successMessage.style.display = 'none';
        }, 3000);
    }
</script>

</body>
</html>
